<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      
        <title>Welcome to Compro online application</title>
    </h:head>

    <h:body>
        <h:outputStylesheet library="css" name="demo.css"  />
     <h:outputStylesheet library="css" name="style.css" />
     <h:outputStylesheet library="css" name="animate-custom.css"/>
        <ui:composition template="commonLayout.xhtml">        
            <ui:define name="content">
             <div class="container" style="width:50%; margin: 10px 300px;">
                
             <section>
               <div id="container_demo" >                   
                  <div id="wrapper">
                     <h:form>     
                      <h:link class="hiddenanchor" id="toregister"/>
                     <h:link class="hiddenanchor" id="tologin"/>
                     <h1>Application Form</h1>
                            <input type="hidden" name="userId" id="userId" value="#{applicationMB.userId}"></input>
                            ${ applicationMB.applicationTemplate.sections.size()}
                                <c:forEach var="section" items="${applicationMB.applicationTemplate.sections}">
                              
                                    
                                    <c:if test="#{section.id=='1'}">
                                    <div id="login" class="animate form">                                  
                                  
                                    <label style="font-size: 20px; text-decoration-line: underline">${section.name}</label>

<h:panelGroup>
    <h:inputText id="TitleText" value="#{section.name}"/>
    <h:commandButton value="Clients" actionListener="#{bindingScheduleHandler.clientList}" />

    <h:selectOneListbox id="listBox" value="#{bindingScheduleHandler.clients}" size="5"  
        rendered="#{bindingScheduleHandler.showClients}">
        <f:selectItems value="#{bindingScheduleHandler.clientLabelsValues}" />
        <f:ajax event="click" listener="#{bindingScheduleHandler.clickListener}"  
            render="TitleText" />
    </h:selectOneListbox>
</h:panelGroup>
                                   
                                    
                                    <c:forEach var="field" items="${section.fields}">
                                        <p>
                                        <label> #{field.name}</label>
                                    
                                     <c:if test="#{field.type=='string'}">
                                         <input type="text" style="height: 30px;" name="#{field.id}" id="#{field.id}"  value="#{applicationMB.applicationForm.fieldsValues.get(field.id)}" label="#{field.name}" ></input>
                                     </c:if>
                                        </p>
                                    </c:forEach>        
                                    
                                    <h:link target="#toregister"   class="to_register" value="Next"/>
                        
                                    
                                    
                                    </div>
                         </c:if>
                         <c:if test="#{section.id!='1'}">
                               <div id="register" class="animate form">                                  
 


                                    
                                    <c:forEach var="field" items="${section.fields}">
                                        <p>
                                        <label> #{field.name}</label>
                                    
                                     <c:if test="#{field.type=='string'}">
                                         <input type="text" name="#{field.id}" id="#{field.id}"  value="#{applicationMB.applicationForm.fieldsValues.get(field.id)}" label="#{field.name}" ></input>
                                     </c:if>
                                        </p>
                                    </c:forEach>    
                                   
                                 <h:link target="#tologin" class="to_register" value="Next"/>
                        </div>
                                        
                        </c:if>
                        </c:forEach>
                            <p class="login button">
                        <p:commandButton id="saveApplication" value="Save" action="#{applicationMB.saveApplication}" ajax="false"/>
                            </p>
                     </h:form>
                     
                  </div>
                </div>
                </section> 
                </div>
            </ui:define>
        </ui:composition> 
        
        
    </h:body>

</html>
